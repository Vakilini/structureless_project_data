
ALTER TABLE Customers
ADD 
PRIMARY KEY (ID)
GO

ALTER TABLE Employer
ADD
PRIMARY KEY(ID)
GO

ALTER TABLE EmployeesInfo
ADD
UNIQUE(ID)
GO

ALTER TABLE EmployeesInfo
ADD
FOREIGN KEY (ID) REFERENCES Employer (ID)
ON DELETE CASCADE
GO

ALTER TABLE Products
ADD
PRIMARY KEY(ID)
GO

ALTER TABLE ProductDetails
ADD
UNIQUE(ID)
GO

ALTER TABLE ProductDetails
ADD
FOREIGN KEY (ID) REFERENCES Products(ID)
	ON DELETE CASCADE
GO

ALTER TABLE Stocks
ADD
UNIQUE(ProductID)
GO

ALTER TABLE Stocks
ADD
FOREIGN KEY (ProductID) REFERENCES Products(ID)
	ON DELETE CASCADE
GO

ALTER TABLE Orders
ADD
PRIMARY KEY (ID)
GO

ALTER TABLE Orders
ADD
FOREIGN KEY (CustomerID) REFERENCES Customers(ID)
	ON DELETE SET NULL
GO

ALTER TABLE Orders
ADD
FOREIGN KEY (EmployeeID) REFERENCES Employer(ID)
	ON DELETE SET NULL
GO

ALTER TABLE OrderDetails
ADD
PRIMARY KEY (OrderID,LineItem)
GO

ALTER TABLE OrderDetails
ADD
FOREIGN KEY (OrderID) REFERENCES Orders(ID)
	ON DELETE CASCADE
GO

ALTER TABLE OrderDetails
ADD
FOREIGN KEY (ProductID) REFERENCES Products(ID)
	ON DELETE SET NULL
GO



ALTER TABLE Customers
ADD
CHECK (Phone LIKE '([0-9][0-9][0-9])[0-9][0-9][0-9][0-9][0-9][0-9][0-9]')
GO

ALTER TABLE EmployeesInfo
ADD
CHECK (Phone LIKE '([0-9][0-9][0-9])[0-9][0-9][0-9][0-9][0-9][0-9][0-9]')
GO

ALTER TABLE EmployeesInfo
ADD
CHECK (BirthDate BETWEEN DATEADD(YEAR, - 50, GETDATE()) AND DATEADD(YEAR,-18,GETDATE()))
GO

ALTER TABLE Orders
ADD
CHECK (OrderDate >= DATEADD(DAY, - 90, GETDATE()) AND OrderdATE <= GETDATE())
GO

ALTER TABLE EmployeesInfo
ADD
CHECK (MaritalStatus in ('Женат', 
GO
